(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var a=e.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var i=a.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=(e,t)=>{Array.from(document.querySelectorAll(".btn")).map((a=>{("EN"===t?e&&"K"===a.id[0]&&"e"===a.id[1]:e&&"K"===a.id[0]&&"e"===a.id[1]||e&&"BracketLeft"===a.id||e&&"BracketRight"===a.id||e&&"Semicolon"===a.id||e&&"Quote"===a.id||e&&"Comma"===a.id||e&&"Period"===a.id||e&&"Backquote"===a.id)?a.textContent=a.innerHTML.toUpperCase():("EN"===t?!e&&"K"===a.id[0]&&"e"===a.id[1]:!e&&"K"===a.id[0]&&"e"===a.id[1]||!e&&"BracketLeft"===a.id||!e&&"BracketRight"===a.id||!e&&"Semicolon"===a.id||!e&&"Quote"===a.id||!e&&"Comma"===a.id||!e&&"Period"===a.id||!e&&"Backquote"===a.id)&&(a.textContent=a.innerHTML.toLowerCase())}))},a=async(e,t)=>{let a=await i();(e?"EN"===t?a.keyboardUpper:a.keyboardRuUpper:"RU"===t?a.keyboardRu:a.keyboard).map((e=>{e.keys.map((e=>{let t=document.getElementById(e.id);t&&(t.textContent=e.key)}))}))},i=async()=>{let e=await fetch("./keyboard.json");return await e.json()},n=async e=>{let t=document.createElement("div");t.className="keyboard";let a=await i();return("EN"===e?a.keyboard:a.keyboardRu).map((e=>{t.append((e=>{let t=document.createElement("div");return t.className="row",e.map((e=>{let a=document.createElement("div");a.className="btnWrap";let i=`wrap${e.id.toLowerCase()}`;a.classList.add(i);let n=document.createElement("span");n.className="btn",n.id=e.id;let l=e.id.toLowerCase();n.classList.add(l),n.textContent=e.key,a.append(n),t.append(a)})),t})(e.keys))})),t},l=e.p+"assets/img/svg/keyb.svg";let o=!1,d="EN",c=!1,r=[];window.onload=function(){let e=localStorage.getItem("lang");e&&(d=e)},window.onload(),async function(){(()=>{let e=document.querySelector("head"),t=document.createElement("link");t.setAttribute("rel","icon"),t.setAttribute("type","image/x-icon"),t.setAttribute("href",l),e.append(t)})();let e=document.createElement("div");e.className="container",e.append(function(){let e=document.createElement("h1");return e.className="title",e.textContent="Виртуальная клавиатура",e}()),e.append((()=>{let e=document.createElement("textarea");return e.className="textarea",e.setAttribute("rows","50"),e.setAttribute("cols","50"),e})());let t=await n(d);e.append(t);let a=document.createElement("p"),i=document.createElement("p");a.className="discription",i.className="language",a.textContent="Клавиатура создана в операционной системе Windows",i.textContent="Для переключения языка комбинация: левыe Shift + Alt",e.append(a),e.append(i),document.body.append(e),r=Array.from(document.querySelectorAll(".btn"))}(),document.addEventListener("keydown",(function(e){e.detail.code&&(e.code=e.detail.code),e.detail.key&&(e.key=e.detail.key);const i=document.querySelector(".textarea");let n=i.selectionStart,l=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));(l&&"K"===l.id[0]&&"e"===l.id[1]||l&&"D"===l.id[0]&&"i"===l.id[1]||l&&"Backquote"===l.id||l&&"Minus"===l.id||l&&"Equal"===l.id||l&&"BracketLeft"===l.id||l&&"BracketRight"===l.id||l&&"Backslash"===l.id||l&&"Semicolon"===l.id||l&&"Quote"===l.id||l&&"Comma"===l.id||l&&"Period"===l.id||l&&"Slash"===l.id)&&(e.preventDefault(),n===i.value.length?i.value+=l.textContent:0===n?(i.value=l.textContent+i.value,i.setSelectionRange(n+1,n+1)):n>0&&n<i.value.length&&(i.value=i.value.slice(0,n)+l.textContent+i.value.slice(n,i.length),i.setSelectionRange(n+1,n+1))),l&&"CapsLock"===l.id?o?(o=!1,l.classList.remove("active"),t(o,d)):(o=!0,l.classList.add("active"),t(o,d)):l&&l.classList.add("active"),(l&&"ShiftLeft"===l.id||l&&"ShiftRight"===l.id)&&(l.classList.add("active"),a(!o,d),c=!0),l&&c&&"AltLeft"===l.id&&(d="EN"===d?"RU":"EN"),l&&"Tab"===l.id&&(e.preventDefault(),n===i.value.length?i.value+="\t":0===n?(i.value="\t"+i.value,i.setSelectionRange(n+1,n+1)):n>0&&n<i.value.length&&(i.value=i.value.slice(0,n)+"\t"+i.value.slice(n,i.length),i.setSelectionRange(n+1,n+1)))})),document.addEventListener("keyup",(e=>{let t=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));(t&&"ShiftLeft"===t.id||t&&"ShiftRight"===t.id)&&(t.classList.remove("active"),a(!!o,d),c=!1),t&&"CapsLock"!==t.id&&t.classList.remove("active")})),setTimeout((()=>{document.querySelector(".textarea").addEventListener("click",(()=>{})),r.map((e=>{e.addEventListener("click",(()=>{let a=document.querySelector(".textarea");a.focus();let i=a.selectionStart;e&&"K"===e.id[0]&&"e"===e.id[1]||"D"===e.id[0]&&"i"===e.id[1]||"Backquote"===e.id||"Minus"===e.id||"Equal"===e.id||"BracketLeft"===e.id||"BracketRight"===e.id||"Backslash"===e.id||"Semicolon"===e.id||"Quote"===e.id||"Comma"===e.id||"Period"===e.id||"Slash"===e.id||"ArrowLeft"===e.id||"ArrowRight"===e.id||"ArrowUp"===e.id||"ArrowDown"===e.id?i===a.value.length?a.value+=e.textContent:0===i?(a.value=e.textContent+a.value,a.setSelectionRange(i+1,i+1)):i>0&&i<a.value.length&&(a.value=a.value.slice(0,i)+e.textContent+a.value.slice(i,a.length),a.setSelectionRange(i+1,i+1)):"Backspace"===e.id?i>0&&(a.value=a.value.slice(0,i-1)+a.value.slice(i,a.length),a.setSelectionRange(i-1,i-1)):"Delete"===e.id?(a.value=a.value.slice(0,i)+a.value.slice(i+1,a.length),a.setSelectionRange(i,i)):"Enter"===e.id?a.value+="\n":"CapsLock"===e.id?o?(o=!1,e.classList.remove("active"),t(o,d)):(o=!0,e.classList.add("active"),t(o,d)):"Space"===e.id?i>0&&i<a.value.length&&(a.value=a.value.slice(0,i)+" "+a.value.slice(i,a.length),a.setSelectionRange(i+1,i+1)):"Tab"===e.id&&(i===a.value.length?a.value+="\t":0===i?(a.value="\t"+a.value,a.setSelectionRange(i+1,i+1)):i>0&&i<a.value.length&&(a.value=a.value.slice(0,i)+"\t"+a.value.slice(i,a.length),a.setSelectionRange(i+1,i+1)))}))}))}),1e3),window.onbeforeunload=function(){localStorage.setItem("lang",d)},window.onbeforeunload()})();
//# sourceMappingURL=main.js.map