(()=>{"use strict";const e=e=>{Array.from(document.querySelectorAll(".btn")).map((t=>{e&&"K"===t.id[0]&&"e"===t.id[1]?t.textContent=t.innerHTML.toUpperCase():e||"K"!==t.id[0]||"e"!==t.id[1]||(t.textContent=t.innerHTML.toLowerCase())}))},t=async(e,t)=>{let d=await a();(e?"EN"===t?d.keyboardUpper:d.keyboardRuUpper:"RU"===t?d.keyboardRu:d.keyboard).map((e=>{e.keys.map((e=>{document.getElementById(e.id).textContent=e.key}))}))},a=async()=>{let e=await fetch("./dist/keyboard.json");return await e.json()},d=async e=>{let t=document.createElement("div");t.className="keyboard";let d=await a();return("EN"===e?d.keyboard:d.keyboardRu).map((e=>{t.append((e=>{let t=document.createElement("div");return t.className="row",e.map((e=>{let a=document.createElement("span");a.className="btn",a.id=e.id;let d=e.id;a.classList.add(d),a.textContent=e.key,t.append(a)})),t})(e.keys))})),t};let i=!1,n="EN",o=!1,l=[];window.onload=function(){let e=localStorage.getItem("lang");e&&(n=e)},window.onload(),async function(){let e=document.createElement("div");e.className="container",e.append(function(){let e=document.createElement("h1");return e.className="title",e.textContent="Виртуальная клавиатура",e}()),e.append((()=>{let e=document.createElement("textarea");return e.className="textarea",e.setAttribute("rows","50"),e.setAttribute("cols","50"),e})());let t=await d(n);e.append(t);let a=document.createElement("p"),i=document.createElement("p");a.className="discription",i.className="language",a.textContent="Клавиатура создана в операционной системе Windows",i.textContent="Для переключения языка комбинация: левыe Shift + Alt",e.append(a),e.append(i),document.body.append(e),l=Array.from(document.querySelectorAll(".btn"))}(),document.addEventListener("keydown",(function(a){a.detail.code&&(a.code=a.detail.code),a.detail.key&&(a.key=a.detail.key);const d=document.querySelector(".textarea");let l=Array.from(document.querySelectorAll(".btn")).find((e=>e.id===a.code));(l&&"K"===l.id[0]&&"e"===l.id[1]||"D"===l.id[0]&&"i"===l.id[1]||"Backquote"===l.id||"Minus"===l.id||"Equal"===l.id||"BracketLeft"===l.id||"BracketRight"===l.id||"Backslash"===l.id||"Semicolon"===l.id||"Quote"===l.id||"Comma"===l.id||"Period"===l.id||"Slash"===l.id)&&(a.preventDefault(),d.value+=l.textContent),"CapsLock"===l.id?i?(i=!1,l.classList.remove("active"),e(i)):(i=!0,l.classList.add("active"),e(i)):l.classList.add("active"),"ShiftLeft"!==l.id&&"ShiftRight"!==l.id||(l.classList.add("active"),t(!i,n),o=!0),o&&"AltLeft"===l.id&&(n="EN"===n?"RU":"EN")})),document.addEventListener("keyup",(e=>{let a=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));"ShiftLeft"!==a.id&&"ShiftRight"!==a.id||(a.classList.remove("active"),t(!!i,n),o=!1),"CapsLock"!==a.id&&a.classList.remove("active")})),setTimeout((()=>{let t=document.querySelector(".textarea");t.addEventListener("click",(()=>{console.log(t)})),l.map((t=>{t.addEventListener("click",(()=>{let a=document.querySelector(".textarea");a.focus();let d=a.selectionStart;t&&"K"===t.id[0]&&"e"===t.id[1]||"D"===t.id[0]&&"i"===t.id[1]||"Backquote"===t.id||"Minus"===t.id||"Equal"===t.id||"BracketLeft"===t.id||"BracketRight"===t.id||"Backslash"===t.id||"Semicolon"===t.id||"Quote"===t.id||"Comma"===t.id||"Period"===t.id||"Slash"===t.id?a.value+=t.textContent:"Backspace"===t.id?d>0&&(a.value=a.value.slice(0,d-1)+a.value.slice(d,a.length),a.setSelectionRange(d-1,d-1)):"Delete"===t.id?(a.value=a.value.slice(0,d)+a.value.slice(d+1,a.length),a.setSelectionRange(d,d)):"Enter"===t.id?a.value+="\n":"CapsLock"===t.id&&(i?(i=!1,t.classList.remove("active"),e(i)):(i=!0,t.classList.add("active"),e(i)))}))}))}),1e3),window.onbeforeunload=function(){localStorage.setItem("lang",n)},window.onbeforeunload()})();
//# sourceMappingURL=main.js.map
