
(()=>{"use strict";const e=e=>{Array.from(document.querySelectorAll(".btn")).map((t=>{e&&"K"===t.id[0]&&"e"===t.id[1]?t.textContent=t.innerHTML.toUpperCase():e||"K"!==t.id[0]||"e"!==t.id[1]||(t.textContent=t.innerHTML.toLowerCase())}))},t=async(e,t)=>{let i=await a();(e?"EN"===t?i.keyboardUpper:i.keyboardRuUpper:"RU"===t?i.keyboardRu:i.keyboard).map((e=>{e.keys.map((e=>{document.getElementById(e.id).textContent=e.key}))}))},a=async()=>{let e=await fetch("./keyboard.json");return await e.json()},i=async e=>{let t=document.createElement("div");t.className="keyboard";let i=await a();return("EN"===e?i.keyboard:i.keyboardRu).map((e=>{t.append((e=>{let t=document.createElement("div");return t.className="row",e.map((e=>{let a=document.createElement("span");a.className="btn",a.id=e.id;let i=e.id;a.classList.add(i),a.textContent=e.key,t.append(a)})),t})(e.keys))})),t};let d=!1,n="EN",o=!1,l=[];window.onload=function(){let e=localStorage.getItem("lang");e&&(n=e)},window.onload(),document.querySelector("html").setAttribute("lang","en"),async function(){let e=document.createElement("div");e.className="container",e.append(function(){let e=document.createElement("h1");return e.className="title",e.textContent="Виртуальная клавиатура",e}()),e.append((()=>{let e=document.createElement("textarea");return e.className="textarea",e.setAttribute("rows","50"),e.setAttribute("cols","50"),e})());let t=await i(n);e.append(t);let a=document.createElement("p"),d=document.createElement("p");a.className="discription",d.className="language",a.textContent="Клавиатура создана в операционной системе Windows",d.textContent="Для переключения языка комбинация: левыe Shift + Alt",e.append(a),e.append(d),document.body.append(e),l=Array.from(document.querySelectorAll(".btn"))}(),document.addEventListener("keydown",(function(a){a.detail.code&&(a.code=a.detail.code),a.detail.key&&(a.key=a.detail.key);const i=document.querySelector(".textarea");let l=Array.from(document.querySelectorAll(".btn")).find((e=>e.id===a.code));(l&&"K"===l.id[0]&&"e"===l.id[1]||"D"===l.id[0]&&"i"===l.id[1]||"Backquote"===l.id||"Minus"===l.id||"Equal"===l.id||"BracketLeft"===l.id||"BracketRight"===l.id||"Backslash"===l.id||"Semicolon"===l.id||"Quote"===l.id||"Comma"===l.id||"Period"===l.id||"Slash"===l.id)&&(a.preventDefault(),i.value+=l.textContent),"CapsLock"===l.id?d?(d=!1,l.classList.remove("active"),e(d)):(d=!0,l.classList.add("active"),e(d)):l.classList.add("active"),"ShiftLeft"!==l.id&&"ShiftRight"!==l.id||(l.classList.add("active"),t(!d,n),o=!0),o&&"AltLeft"===l.id&&(n="EN"===n?"RU":"EN")})),document.addEventListener("keyup",(e=>{let a=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));"ShiftLeft"!==a.id&&"ShiftRight"!==a.id||(a.classList.remove("active"),t(!!d,n),o=!1),"CapsLock"!==a.id&&a.classList.remove("active")})),setTimeout((()=>{document.querySelector(".textarea").addEventListener("click",(()=>{})),l.map((t=>{t.addEventListener("click",(()=>{let a=document.querySelector(".textarea");console.log(a),a.focus();let i=a.selectionStart;t&&"K"===t.id[0]&&"e"===t.id[1]||"D"===t.id[0]&&"i"===t.id[1]||"Backquote"===t.id||"Minus"===t.id||"Equal"===t.id||"BracketLeft"===t.id||"BracketRight"===t.id||"Backslash"===t.id||"Semicolon"===t.id||"Quote"===t.id||"Comma"===t.id||"Period"===t.id||"Slash"===t.id||"ArrowLeft"===t.id||"ArrowRight"===t.id||"ArrowUp"===t.id||"ArrowDown"===t.id?a.value+=t.textContent:"Backspace"===t.id?i>0&&(a.value=a.value.slice(0,i-1)+a.value.slice(i,a.length),a.setSelectionRange(i-1,i-1)):"Delete"===t.id?(a.value=a.value.slice(0,i)+a.value.slice(i+1,a.length),a.setSelectionRange(i,i)):"Enter"===t.id?a.value+="\n":"CapsLock"===t.id&&(d?(d=!1,t.classList.remove("active"),e(d)):(d=!0,t.classList.add("active"),e(d)))}))}))}),1e3),window.onbeforeunload=function(){localStorage.setItem("lang",n)},window.onbeforeunload()})();
//# sourceMappingURL=main.js.map

