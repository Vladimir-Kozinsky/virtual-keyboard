(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var a=e.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var n=a.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e=>{Array.from(document.querySelectorAll(".btn")).map((t=>{e&&"K"===t.id[0]&&"e"===t.id[1]?t.textContent=t.innerHTML.toUpperCase():e||"K"!==t.id[0]||"e"!==t.id[1]||(t.textContent=t.innerHTML.toLowerCase())}))},a=async(e,t)=>{let a=await n();(e?"EN"===t?a.keyboardUpper:a.keyboardRuUpper:"RU"===t?a.keyboardRu:a.keyboard).map((e=>{e.keys.map((e=>{document.getElementById(e.id).textContent=e.key}))}))},n=async()=>{let e=await fetch("./keyboard.json");return await e.json()},i=async e=>{let t=document.createElement("div");t.className="keyboard";let a=await n();return("EN"===e?a.keyboard:a.keyboardRu).map((e=>{t.append((e=>{let t=document.createElement("div");return t.className="row",e.map((e=>{let a=document.createElement("span");a.className="btn",a.id=e.id;let n=e.id;a.classList.add(n),a.textContent=e.key,t.append(a)})),t})(e.keys))})),t},l=e.p+"assets/img/svg/keyb.svg";let o=!1,c="EN",r=!1,d=[];window.onload=function(){let e=localStorage.getItem("lang");e&&(c=e)},window.onload(),(()=>{document.querySelector("html").setAttribute("lang","en");let e=document.querySelector("head"),t=document.createElement("link");t.setAttribute("href","main.css"),t.setAttribute("rel","stylesheet"),e.append(t);let a=document.createElement("link");a.setAttribute("rel","icon"),a.setAttribute("type","image/x-icon"),a.setAttribute("href",l),e.append(a)})(),async function(){let e=document.createElement("div");e.className="container",e.append(function(){let e=document.createElement("h1");return e.className="title",e.textContent="Виртуальная клавиатура",e}()),e.append((()=>{let e=document.createElement("textarea");return e.className="textarea",e.setAttribute("rows","50"),e.setAttribute("cols","50"),e})());let t=await i(c);e.append(t);let a=document.createElement("p"),n=document.createElement("p");a.className="discription",n.className="language",a.textContent="Клавиатура создана в операционной системе Windows",n.textContent="Для переключения языка комбинация: левыe Shift + Alt",e.append(a),e.append(n),document.body.append(e),d=Array.from(document.querySelectorAll(".btn"))}(),document.addEventListener("keydown",(function(e){e.detail.code&&(e.code=e.detail.code),e.detail.key&&(e.key=e.detail.key);const n=document.querySelector(".textarea");let i=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));if(i&&"K"===i.id[0]&&"e"===i.id[1]||"D"===i.id[0]&&"i"===i.id[1]||"Backquote"===i.id||"Minus"===i.id||"Equal"===i.id||"BracketLeft"===i.id||"BracketRight"===i.id||"Backslash"===i.id||"Semicolon"===i.id||"Quote"===i.id||"Comma"===i.id||"Period"===i.id||"Slash"===i.id){e.preventDefault();let t=n.selectionStart;t===n.value.length?n.value+=i.textContent:0===t?(n.value=i.textContent+n.value,n.setSelectionRange(t+1,t+1)):t>0&&t<n.value.length&&(n.value=n.value.slice(0,t)+i.textContent+n.value.slice(t,n.length),n.setSelectionRange(t+1,t+1))}"CapsLock"===i.id?o?(o=!1,i.classList.remove("active"),t(o)):(o=!0,i.classList.add("active"),t(o)):i.classList.add("active"),"ShiftLeft"!==i.id&&"ShiftRight"!==i.id||(i.classList.add("active"),a(!o,c),r=!0),r&&"AltLeft"===i.id&&(c="EN"===c?"RU":"EN")})),document.addEventListener("keyup",(e=>{let t=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));"ShiftLeft"!==t.id&&"ShiftRight"!==t.id||(t.classList.remove("active"),a(!!o,c),r=!1),"CapsLock"!==t.id&&t.classList.remove("active")})),setTimeout((()=>{document.querySelector(".textarea").addEventListener("click",(()=>{})),d.map((e=>{e.addEventListener("click",(()=>{let a=document.querySelector(".textarea");console.log(a),a.focus();let n=a.selectionStart;e&&"K"===e.id[0]&&"e"===e.id[1]||"D"===e.id[0]&&"i"===e.id[1]||"Backquote"===e.id||"Minus"===e.id||"Equal"===e.id||"BracketLeft"===e.id||"BracketRight"===e.id||"Backslash"===e.id||"Semicolon"===e.id||"Quote"===e.id||"Comma"===e.id||"Period"===e.id||"Slash"===e.id||"ArrowLeft"===e.id||"ArrowRight"===e.id||"ArrowUp"===e.id||"ArrowDown"===e.id?n===a.value.length?a.value+=e.textContent:0===n?(a.value=e.textContent+a.value,a.setSelectionRange(n+1,n+1)):n>0&&n<a.value.length&&(a.value=a.value.slice(0,n)+e.textContent+a.value.slice(n,a.length),a.setSelectionRange(n+1,n+1)):"Backspace"===e.id?n>0&&(a.value=a.value.slice(0,n-1)+a.value.slice(n,a.length),a.setSelectionRange(n-1,n-1)):"Delete"===e.id?(a.value=a.value.slice(0,n)+a.value.slice(n+1,a.length),a.setSelectionRange(n,n)):"Enter"===e.id?a.value+="\n":"CapsLock"===e.id?o?(o=!1,e.classList.remove("active"),t(o)):(o=!0,e.classList.add("active"),t(o)):"Space"===e.id&&n>0&&n<a.value.length&&(a.value=a.value.slice(0,n)+" "+a.value.slice(n,a.length),a.setSelectionRange(n+1,n+1))}))}))}),1e3),window.onbeforeunload=function(){localStorage.setItem("lang",c)},window.onbeforeunload()})();
//# sourceMappingURL=main.js.map