(()=>{"use strict";const e=e=>{Array.from(document.querySelectorAll(".btn")).map((t=>{e&&"K"===t.id[0]&&"e"===t.id[1]?t.textContent=t.innerHTML.toUpperCase():e||"K"!==t.id[0]||"e"!==t.id[1]||(t.textContent=t.innerHTML.toLowerCase())}))},t=async(e,t)=>{let d=await a();(e?"EN"===t?d.keyboardUpper:d.keyboardRuUpper:"RU"===t?d.keyboardRu:d.keyboard).map((e=>{e.keys.map((e=>{document.getElementById(e.id).textContent=e.key}))}))},a=async()=>{let e=await fetch("/keyboard/keyboard.json");return await e.json()},d=async()=>{let e=document.createElement("div");return e.className="keyboard",(await a()).keyboard.map((t=>{e.append((e=>{let t=document.createElement("div");return t.className="row",e.map((e=>{let a=document.createElement("span");a.className="btn",a.id=e.id;let d=e.id;a.classList.add(d),a.textContent=e.key,t.append(a)})),t})(t.keys))})),e};let n=!1,i="EN",o=!1;!async function(){let e=document.createElement("div");e.className="container",e.append(function(){let e=document.createElement("h1");return e.className="title",e.textContent="Виртуальная клавиатура",e}()),e.append((()=>{let e=document.createElement("textarea");return e.className="textarea",e.setAttribute("rows","50"),e.setAttribute("cols","50"),e})());let t=await d();e.append(t),document.body.append(e)}(),document.addEventListener("keydown",(function(a){const d=document.querySelector(".textarea");let c=Array.from(document.querySelectorAll(".btn")).find((e=>e.id===a.code));("K"===c.id[0]&&"e"===c.id[1]||"D"===c.id[0]&&"i"===c.id[1]||"Backquote"===c.id||"Minus"===c.id||"Equal"===c.id||"BracketLeft"===c.id||"BracketRight"===c.id||"Backslash"===c.id||"Semicolon"===c.id||"Quote"===c.id||"Comma"===c.id||"Period"===c.id||"Slash"===c.id)&&(a.preventDefault(),d.value+=c.textContent),"CapsLock"===c.id?n?(n=!1,c.classList.remove("active"),e(n)):(n=!0,c.classList.add("active"),e(n)):c.classList.add("active"),"ShiftLeft"!==c.id&&"ShiftRight"!==c.id||(c.classList.add("active"),t(!n,i),o=!0),o&&"AltLeft"===c.id&&(i="EN"===i?"RU":"EN",console.log(i))})),document.addEventListener("keyup",(e=>{let a=Array.from(document.querySelectorAll(".btn")).find((t=>t.id===e.code));"ShiftLeft"!==a.id&&"ShiftRight"!==a.id||(a.classList.remove("active"),t(!!n,i),o=!1),"CapsLock"!==a.id&&a.classList.remove("active")}))})();
//# sourceMappingURL=main.js.map